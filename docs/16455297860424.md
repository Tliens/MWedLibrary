# 组件化

### 组件化方案：

#### 1.模块解耦方式 CTMeditor

- ModuleA -> HeadB -> ModuleB

HeadB 用于模块解耦，属于中间件

执行流程：
1. 是否为Swift模块，如果是，加上module名称，比如：PHLogin.
2. 统一添加 Target_ 前缀
3. 去缓存中获取
4. 如果缓冲中没有，根据类名生成类 NSClassFromString
5. 如果类为空，则走无响应方法
6. 如果类不为空，则判断是否能相应 action （respondsToSelector）
7. 如果能响应，根据action生成方法签名，根据方法签名以及参数、利用NSInvocation进行消息转发
8. 如果不能响应，则走无响应方法

缺点：

1. 中间件开发过程中比较麻烦
2. 中间件硬编码

优点：

1. 支持block作为参数传递： unsafeBitCast(block, to: AnyObject.self)
2. Swift、OC友好、
3. 代码简单，入手简单

#### 2.组件形式
- 私有pod
- 基础组件二进制，编译速度

#### 3.组件
- 基础组件（扩展、基础类、协议、UI）
- 业务组件，也称为模块
- 资源组件，合并相同资源，减少包体积，包含图片、音视频、字体

#### 4.业务场景
CTMeditor + 路由 配合使用。

项目对外接口由服务端+客户端共同制定，比如处理某个H5界面跳转，对外暴露："PH://pages/room?id=1"，App通过路由解析器调用CTMeditor，实现跳转。



