# 开发 Tips

## 一、iOS Window

windows添加悬浮视图，如果显示内容与界面强关联，有可能发生界面不在，悬浮视图还在的bug

windows层级


## 二、iOS AVAudioSession

在使用声网的语音房同时使用AVPlayer播放音频，出现如下错误：

```
AVAudioSession.mm:997:-[AVAudioSession setActive:withOptions:error:]: Deactivating an audio session that has running I/O. All I/O should be stopped or paused prior to deactivating the audio session.
```

表示录音时，不允许播放声音

```
 	//解决用avplayer播放失败的问题
 	self.agoraKit?.setParameters("{\"che.audio.keep.audiosession\": true}")
```

联系声网的技术后，他们表示可以使用startAudioMixing 但这个方法，在其他功能页面使用不方便，不实用。同时他们表示可以暂时用这个私有方式`{\"che.audio.keep.audiosession\": true}`，他们表示后续部分会开放出来。

## 三、迅速提高开能力的方法
1、伪代码
2、时序图
